design_task:
  description: >
    Take the high level requirements described here and prepare a detailed design for the engineer;
    everything should be in 1 python module, but outline the classes and methods in the module.
    Here are the requirements: {requirements}
    IMPORTANT: DO NOT write python code. ONLY output the design in MARKDOWN format, laying out in detail the classes and functions in the module, describing the functionality.
  expected_output: >
    A detailed design for the engineer, identifying the classes and functions in the module.
  agent: team_lead
  output_file: output/{module_name}_design.md

backend_task:
  description: >
    Write a python module that implements the design described by the engineering lead, in order to achieve the requirements.
    Here are the requirements: {requirements}
  expected_output: >
    A python module that implements the design and achieves the requirements.
    IMPORTANT: Output ONLY the raw Python code without any markdown formatting, code block delimiters, or backticks.
    The output should be valid Python code that can be directly saved to a file and executed.
  agent: backend_engg
  context:
    - design_task
  output_file: output/{module_name}

frontend_task:
  description: >
    Write a Gradio UI in a module app.py that demonstrates the given backend class in {module_name}.

    HARD CONSTRAINTS:
    - You MUST use gr.Blocks (NOT gr.Interface).
    - The UI will have multiple buttons and callbacks.
    - Do NOT use gr.Interface anywhere.
    - The code must run without errors on first execution.

    UI REQUIREMENTS:
    - Assume only 1 user (global state is acceptable).
    - Keep the UI very simple â€” this is a prototype/demo.
    - Each backend action should be triggered by a separate button.
    - All outputs should be shown in a single output textbox.

    BACKEND:
    - Import the backend class from {module_name}.
    - Instantiate the backend object explicitly.

    QUALITY BAR:
    - The code should follow correct Gradio API usage.
    - Avoid deprecated or invalid Gradio patterns.
    - Prefer clarity over cleverness.

    Here are the functional requirements:
    {requirements}

  expected_output: >
    A valid Python file app.py that:
    - Uses gr.Blocks correctly
    - Can be run directly with `python app.py`
    - Imports the backend class from {module_name}
    - Contains NO markdown, backticks, or commentary
    - Contains ONLY executable Python code

  agent: frontend_engg
  context:
    - backend_task
  output_file: output/app.py


testing_task:
  description: >
    Write unit tests for the given backend module {module_name} and create a test_{module_name} in the same directory as the backend module.
  expected_output: >
    A test_{module_name} module that tests the given backend module.
    IMPORTANT: Output ONLY the raw Python code without any markdown formatting, code block delimiters, or backticks.
    The output should be valid Python code that can be directly saved to a file and executed.
  agent: testing_engg
  context:
    - backend_task
  output_file: output/test_{module_name}
